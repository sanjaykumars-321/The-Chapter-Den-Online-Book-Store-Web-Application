import{j as e,N as L,a as x,L as u,l as F,s as E,b as O,c as b,U as M,C,d as q,S,z as I,e as p,r as B,O as U,f as P,g as Z}from"./index-CxhnL_yD.js";import{l as A}from"./logo-DuuO9Rm1.js";import{I as R,a as H}from"./index-RhR9qCDk.js";import{G as f}from"./iconBase-fCoKCrix.js";import{u as Q}from"./useLogout-sbLkxrC5.js";import{S as _,u as T}from"./SpinnerMini-TSTRqYFy.js";import{P as V}from"./index-075kW4IK.js";import{u as Y,a as D}from"./useCartLists-BCz1lc0l.js";import{L as $}from"./index-CKYSIgSX.js";import{M as G}from"./index-BXsKJbct.js";import{u as W}from"./useDeleteItemCart-BKwWq99m.js";import{T as K}from"./index-mJhcCT2q.js";function J(){return e.jsxs(L,{to:"/home",className:"flex items-center justify-center gap-2",children:[e.jsx("img",{src:A,alt:"The Chapter Den Logo",className:"h-[5rem] w-[5rem]"}),e.jsx("h1",{className:"text-3xl font-medium text-gray-800",children:"The Chapter Den"})]})}function X(){const t=x();function r(){t(O())}function i(){t(F(!0)),t(E(!1)),r()}function n(){t(E(!0)),t(F(!1)),r()}return e.jsxs("div",{className:"absolute right-[8rem] top-[6.5rem] flex h-[11rem] w-[12rem] flex-col items-center justify-center gap-6 rounded-xl bg-white px-4 py-4 text-gray-900 shadow-[0px_2px_8px_0px_rgba(99,99,99,0.2)] transition-all",children:[e.jsx(u,{to:"/login",onClick:i,className:"logsignButton hover: border-2 border-[#FF884D] hover:bg-[#FFCCB3] active:bg-[#FFCCB3]",children:"Log In"}),e.jsx(u,{to:"/signUp",onClick:n,className:"logsignButton hover bg-[#ff5500] text-white hover:bg-[#E64D00] active:bg-[#E64D00]",children:"Sign Up"})]})}function ee(t){return f({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"},child:[]}]})(t)}function te(t){return f({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Logout"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.968,18.448a2.577,2.577,0,0,1-2.73,2.5c-2.153.012-4.306,0-6.459,0a.5.5,0,0,1,0-1c2.2,0,4.4.032,6.6,0,1.107-.016,1.589-.848,1.589-1.838V5.647A1.546,1.546,0,0,0,19,4.175a3.023,3.023,0,0,0-1.061-.095H11.779a.5.5,0,0,1,0-1c2.224,0,4.465-.085,6.687,0a2.567,2.567,0,0,1,2.5,2.67Z"},child:[]},{tag:"path",attr:{d:"M3.176,11.663a.455.455,0,0,0-.138.311c0,.015,0,.028-.006.043s0,.027.006.041a.457.457,0,0,0,.138.312l3.669,3.669a.5.5,0,0,0,.707-.707L4.737,12.516H15.479a.5.5,0,0,0,0-1H4.737L7.552,8.7a.5.5,0,0,0-.707-.707Z"},child:[]}]}]}]})(t)}function se(t){return f({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(t)}function re(){const{user:t}=b(),r=x(),i=t?.user_metadata,n=i?.fullName?.slice(0,1),{logout:o,isLoading:l}=Q();function a(){r(M())}function m(){r(M()),o()}return e.jsxs("div",{className:"absolute right-[2.5rem] top-[6.5rem] flex flex-col items-center justify-center gap-6 rounded-xl bg-white px-8 py-8 shadow-[0px_2px_8px_0px_rgba(99,99,99,0.2)] transition-all",children:[e.jsx("button",{className:"flex h-[3.6rem] w-[3.6rem] items-center justify-center rounded-full border-4 border-slate-300 bg-slate-600 px-4 py-4 text-2xl font-normal text-white",children:e.jsx("span",{children:n?.toUpperCase()})}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:i?.fullName.toUpperCase()}),e.jsx("p",{className:"text-base font-normal text-gray-600",children:t?.email}),e.jsxs(u,{to:"/user",className:"flex w-full items-start justify-center gap-2 rounded-full border-2 border-[#ff5500] px-4 py-2 text-center text-base font-medium text-[#ff5500] hover:bg-[#FFEEE6] active:bg-[#FFEEE6]",onClick:a,children:[e.jsx(se,{size:25}),"View Profile"]}),e.jsxs(u,{to:"/orderedList",className:"flex w-full items-start justify-center gap-2 rounded-full border-2 border-[#ff5500] px-4 py-2 text-center text-base font-medium text-[#ff5500] hover:bg-[#FFEEE6] active:bg-[#FFEEE6]",onClick:a,children:[e.jsx(V,{size:25})," Your Orders"]}),e.jsx("button",{className:"flex w-full items-center justify-center gap-4 rounded-full bg-[#ff5500] px-4 py-2 text-base font-semibold text-white hover:bg-[#E64D00] active:bg-[#E64D00]",onClick:m,children:l?e.jsx(_,{}):e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx(te,{size:25,className:"font-semibold"}),"logout"]})})]})}function ae(){const t=x();function r(){t(C(!1))}return e.jsxs("div",{className:"flex h-[35rem] flex-col items-center justify-center gap-6",children:[e.jsx($,{size:80,className:"text-gray-300"}),e.jsx("p",{className:"text-xl font-normal text-gray-800",children:"Your cart is currently empty"}),e.jsx(u,{to:"/books",onClick:r,className:"rounded-full bg-gray-400 px-6 py-2 text-lg font-semibold text-white hover:bg-[#ff5500] active:bg-[#ff5500]",children:"Order your books now"})]})}function ie(t){return f({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}function ne(t){return f({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}function oe(t){return f({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M3.5 2h-3c-0.275 0-0.5 0.225-0.5 0.5v11c0 0.275 0.225 0.5 0.5 0.5h3c0.275 0 0.5-0.225 0.5-0.5v-11c0-0.275-0.225-0.5-0.5-0.5zM3 5h-2v-1h2v1z"},child:[]},{tag:"path",attr:{d:"M8.5 2h-3c-0.275 0-0.5 0.225-0.5 0.5v11c0 0.275 0.225 0.5 0.5 0.5h3c0.275 0 0.5-0.225 0.5-0.5v-11c0-0.275-0.225-0.5-0.5-0.5zM8 5h-2v-1h2v1z"},child:[]},{tag:"path",attr:{d:"M11.954 2.773l-2.679 1.35c-0.246 0.124-0.345 0.426-0.222 0.671l4.5 8.93c0.124 0.246 0.426 0.345 0.671 0.222l2.679-1.35c0.246-0.124 0.345-0.426 0.222-0.671l-4.5-8.93c-0.124-0.246-0.426-0.345-0.671-0.222z"},child:[]},{tag:"path",attr:{d:"M14.5 13.5c0 0.276-0.224 0.5-0.5 0.5s-0.5-0.224-0.5-0.5c0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5z"},child:[]}]})(t)}const le=function(){const t=q(),{mutate:r,isPending:i,error:n}=T({mutationFn:({id:o,quantity:l,price:a})=>Y({id:o,quantity:l,price:a}),onSuccess:()=>{t.invalidateQueries({queryKey:["carts"]})}});return{updateCart:r,isLoading:i,error:n}};function ce(){const t=x();function r(){t(C(!1))}const{cartList:i,isLoading:n}=D(),{user:o}=b(),l=i?.filter(s=>s?.user_id===o?.id),a=l?.slice().sort((s,d)=>d?.id-s?.id),{deleteCartItem:m,isLoading:y}=W(),{updateCart:g}=le();function v(s){m(s,{onSuccess:()=>{I.success("book remove from your cart")}}),console.log(s)}function z(s,d,k){const h=d+1,w=h*k;g({id:s,quantity:h,price:w})}function j(s,d,k){if(d>1){const h=d-1,w=h*k;g({id:s,quantity:h,price:w})}}const N=a?.reduce((s,d)=>s+(d?.total_book_price||0),0),c=a?.reduce((s,d)=>s+(d?.quantity||0),0);return e.jsxs("div",{className:"absolute right-0 top-0 flex min-h-dvh w-[32.5rem] flex-col bg-white",children:[n&&e.jsx(S,{}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",id:"CartInside",children:[a?.length===0?"":e.jsxs("h1",{className:"flex w-full items-center justify-center gap-2 px-4 text-xl font-medium text-gray-950",children:[e.jsx(oe,{className:"text-green-600",size:28}),"Your Cart Is Ready!"]}),e.jsx("button",{onClick:r,className:"flex w-full items-end justify-end px-4 py-4",children:e.jsx("span",{children:e.jsx(R,{size:30,className:"text-gray-700 hover:text-gray-950 active:text-gray-900"})})})]}),l?.length===0?e.jsx(ae,{}):e.jsxs("ul",{className:"mx-auto flex flex-col items-start justify-start gap-4 px-8 pb-[14rem] pt-4",children:[a?.map(s=>e.jsxs("li",{className:"flex w-[30rem] items-start justify-start gap-6 rounded-xl border-2 border-gray-100 px-4 py-4",children:[e.jsx(u,{to:`/books/${s.books.id}`,className:"flex items-center justify-center",children:e.jsx("img",{src:s.books.image_front,alt:"book-image",className:"h-[10rem] w-[10rem] select-none rounded-lg"})}),e.jsxs("div",{className:"flex w-[20rem] flex-col items-start justify-start gap-2",children:[e.jsxs(u,{to:`/books/${s.books.id}`,className:"text-lg font-semibold text-gray-900",children:[s.books.book_name," "]}),e.jsxs("p",{className:"flex items-center justify-center gap-4 text-sm font-normal text-gray-800",children:[s.books.type," ",e.jsx("span",{className:"rounded-md bg-slate-100 px-4 py-1 font-medium text-gray-900",children:s.books.book_type})]}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-4 text-lg font-semibold text-gray-800",children:[e.jsxs("p",{className:"text-start",children:["â‚¹",s?.total_book_price]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 rounded-full border-2 border-[#FF9966] bg-white px-4 py-2 transition-all",children:[e.jsx("button",{className:"text-gray-900 hover:text-[#ff5500] active:text-[#ff5500]",onClick:()=>j(s.id,s.quantity,s.per_book_price),children:e.jsx(ie,{size:14})}),e.jsx("p",{className:"cursor-default text-base font-normal text-gray-900",children:s.quantity}),e.jsx("button",{className:"text-gray-900 hover:text-[#ff5500] active:text-[#ff5500]",onClick:()=>z(s.id,s.quantity,s.per_book_price),children:e.jsx(ne,{size:14})})]})]}),e.jsx("div",{className:"text-base font-semibold text-gray-800"})]}),e.jsxs("div",{className:"flex h-[5rem] flex-col items-center justify-center gap-4",children:[e.jsx("button",{className:"rounded-lg bg-slate-50 px-2 py-2 shadow-inner transition-all",onClick:()=>v(s.id),children:y?e.jsx(_,{}):e.jsx(G,{size:25,className:"text-gray-600 hover:text-red-600"})}),e.jsx("p",{className:"select-none text-center text-sm",children:"Remove"})]})]},s.id)),e.jsxs("div",{className:"fixed bottom-4 mx-auto flex h-[11.5rem] w-[30rem] flex-col gap-5 rounded-md bg-white px-6 py-5 shadow-[0px_3px_8px_rgba(0,0,0,0.24)]",children:[e.jsxs("div",{className:"flex items-center justify-between px-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-950",children:"Total Price"}),e.jsxs("h1",{className:"text-2xl font-bold text-[#ff5500]",children:["â‚¹",N]})]}),e.jsxs("p",{className:"flex items-center justify-center gap-2 text-center text-base font-semibold text-blue-950",children:[e.jsx(K,{size:25}),"We always deliver for free â€” no delivery charges ever!"]}),e.jsxs(u,{to:"/order",className:"rounded-full bg-[#ff5500] px-4 py-2 text-center text-[1.2rem] font-medium text-white outline-none",onClick:r,children:["Proceed to Buy (",c," books)"]})]})]})]})}function de(){const t=x();function r(){t(C(!1))}function i(n){const o=n.target.getAttribute("id");o==="CartOutSide"&&o==="CartOutSide"&&r()}return e.jsx("div",{id:"CartOutSide",className:"fixed inset-0 left-0 top-0 z-50 min-h-screen w-full overflow-y-auto overflow-x-hidden bg-[#0f0e0e72] transition-all",onClick:i,children:e.jsx(ce,{})})}function ue(){const t=x(),r=p(c=>c.user.userBtn),i=p(c=>c.cart.cartClicked),{isAuthenticated:n,user:o}=b(),a=o?.user_metadata?.fullName.slice(0,1),m=p(c=>c.modal.userModal);function y(){t(M())}const{cartList:g,isLoading:v}=D(),j=g?.filter(c=>c?.user_id===o?.id)?.slice().sort((c,s)=>s?.id-c?.id),N=j?.reduce((c,s)=>c+(s?.quantity||0),0);return e.jsxs("ul",{className:"flex items-center justify-around gap-12 text-lg font-semibold text-gray-800",children:[e.jsx("li",{children:e.jsx(L,{to:"/books",className:"navhover navBg transition-all",children:"View Books"})}),e.jsx("li",{children:e.jsx(L,{to:"/about",className:"navhover navBg transition-all",children:"About"})}),n?e.jsxs("li",{children:[e.jsx("button",{className:"flex h-[2.6rem] w-[2.6rem] items-center justify-center rounded-full border-4 border-slate-300 bg-slate-600 px-4 py-4 text-xl font-normal text-white hover:border-slate-400",onClick:y,children:e.jsx("span",{children:a?.toUpperCase()})}),m&&e.jsx(re,{})]}):e.jsxs("li",{children:[e.jsx("button",{onClick:()=>t(O()),children:e.jsx(ee,{size:75,className:"navhover navBg transition-all"})}),r&&e.jsx(X,{})]}),e.jsxs("li",{children:[e.jsx("button",{onClick:()=>{t(C(!0))},children:e.jsxs("div",{children:[e.jsx(H,{size:75,className:"navBg navhover relative transition-all"}),e.jsx("div",{className:"absolute right-[3.8rem] top-2 flex h-9 w-9 items-center justify-center rounded-full bg-[#ff5500] text-center text-[0.95rem] text-white",children:e.jsx("p",{children:j?v?e.jsx(_,{}):N:"0"})})]})}),i&&e.jsx(de,{})]})]})}function xe({sectionEl:t,modalClose:r}){const[i,n]=B.useState(!1);return B.useEffect(()=>{const o=t.current;if(!o)return;let l=o.getBoundingClientRect().top;const a=()=>{n(window.scrollY>l)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[t]),e.jsx(e.Fragment,{children:e.jsxs("header",{className:`z-50 flex items-center justify-between px-16 py-2 ${i?"fixed top-0 w-full bg-white shadow-sm shadow-[#FFCCB3]":""}`,onClick:r,children:[e.jsx(J,{}),e.jsx(ue,{})]})})}function we(){const t=B.useRef(null),r=p(a=>a.modal.userModal),i=p(a=>a.user.userBtn),n=x(),{isLoading:o}=b();if(o)return e.jsx(S,{});function l(){r===!0&&n(P(!1)),i===!0&&n(Z(!1))}return e.jsxs(e.Fragment,{children:[e.jsx(xe,{sectionEl:t,modalClose:l}),e.jsx(U,{context:{sectionEl:t,handleOutsideClick:l},onClick:l})]})}export{we as default};
