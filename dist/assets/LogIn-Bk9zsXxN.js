import{d as w,k as N,n as y,z as d,r as b,a as v,e as E,j as e,L as u,o as L,u as F}from"./index-CxhnL_yD.js";import{F as S,a as D}from"./index-CSx6wYZJ.js";import{u as C}from"./index.esm-BA-d1bXk.js";import{r as I,F as x}from"./login-signup-image-C476cLrk.js";import{u as T,S as k}from"./SpinnerMini-TSTRqYFy.js";import"./iconBase-fCoKCrix.js";function P(){const s=w(),o=N(),{isPending:n,mutate:i}=T({mutationFn:({email:r,password:t})=>y({email:r,password:t}),onSuccess:r=>{s.setQueryData(["user"],r.user),s.invalidateQueries(["user"]),o("/books"),d.success("your account successfully login")},onError:r=>{console.log("ERROR",r),d.error("Email or password is incorrect. If you are a new user, please sign up.")}});return{login:i,isLogin:n}}function R(){const[s,o]=b.useState(),n=v(),i=E(a=>a.user.logInPasswordViewBtn),{login:r,isLogin:t}=P(),{register:l,handleSubmit:p,reset:f}=C();function g(a){a.preventDefault(),n(L())}function h(a){const{email:c,password:m}=a;!c||!m||r({email:c,password:m},{onSettled:()=>{f()}})}function j(a){o(a)}return e.jsxs("div",{className:"grid grid-cols-2 items-center justify-center gap-8 px-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:I,className:"h-[33rem] w-[33rem]",alt:"login image"})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("form",{className:"formLayout",onSubmit:p(h,j),children:[e.jsx("h1",{className:"formTitle",children:"Login in to The Chapter Den"}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"email",className:"formLabel",children:"Email"}),e.jsx("input",{type:"text",name:"email",id:"email",className:"formInputBox",...l("email",{required:"This field is required"}),disabled:t}),s?.email?.message&&e.jsx(x,{children:s.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"password",className:"formLabel",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:`${i?"password":"text"}`,name:"password",id:"password",className:"formInputBox",...l("password",{required:"This field is required"}),disabled:t}),e.jsx("button",{className:"absolute right-[1rem] top-[7px]",onClick:g,children:i?e.jsx(S,{size:24,className:"text-gray-800"}):e.jsx(D,{size:24,className:"text-[#ff5500]"})})]}),s?.password?.message&&e.jsx(x,{children:s.password.message})]}),e.jsx("div",{className:"w-full cursor-pointer px-4 text-start",children:e.jsx(u,{to:"/resetPassword",className:"text-base text-[#ff5500] hover:text-[#E64D00] active:text-[#E64D00]",children:"Forgot password?"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 px-4",children:[e.jsxs("p",{className:"text-base font-medium text-gray-700",children:["New to The Chapter Den?"," ",e.jsx(u,{to:"/signUp",className:"text-[#ff5500] underline",children:"Sign up Â "})]}),e.jsx("button",{className:"w-[22.5rem] rounded-full bg-[#ff5500] px-4 py-2 text-xl font-medium text-white hover:bg-[#E64D00] active:bg-[#E64D00]",children:t?e.jsx(k,{}):"log in"})]})]})})]})}function V(){const{handleOutsideClick:s}=F();return e.jsx("section",{className:"overflow-hidden px-[4.8rem] py-[2.4rem]",onClick:s,children:e.jsx(R,{})})}export{V as default};
