import{k as T,z as g,c as _,r as z,j as e,u as V}from"./index-CxhnL_yD.js";import{u as P}from"./index.esm-BA-d1bXk.js";import{u as $}from"./useUpdateUser-Did_XRgN.js";import{u as U,S as b}from"./SpinnerMini-TSTRqYFy.js";import{a as H}from"./useCartLists-BCz1lc0l.js";import{T as Y}from"./index-mJhcCT2q.js";import{G as j}from"./iconBase-fCoKCrix.js";import{a as G}from"./index-BXsKJbct.js";import{c as W}from"./apiOrder-D3EiarbZ.js";import{u as X}from"./useDeleteItemCart-BKwWq99m.js";import{E as A}from"./EmptyOrder-llJxYOQS.js";import"./index-CKYSIgSX.js";function R(r){return j({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v256h448V96H32zm160.5 224h-80.4c0-26.6-21.5-48.1-48.1-48.1V192c35.3 0 64-28.7 64-64h64.5c-19.9 23.5-32.5 57.8-32.5 96s12.6 72.5 32.5 96zM448 271.9c-26 0-48 21.5-48 48.1h-80.5c19.9-23.5 32.5-57.8 32.5-96s-12.6-72.5-32.5-96H384c0 35.3 28.7 64 64 64v79.9zM32 384h448v32H32z"},child:[]}]})(r)}function J(){const r=T(),{mutate:l,isPending:t,error:d}=U({mutationFn:W,onSuccess:()=>{g.success("you place order is sucessfully"),r("/orderConfirmationBill")},onError:()=>{g.error("error")}});return{createOrder:l,isLoading:t,error:d}}function K(r){return j({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.027.29c-.424.143-.776.418-1.106.707C.434 5.314.254 5.497.254 5.497c-.236.22-.257.537-.254.859l.021 1.819s2.07-2.013 5.164-4.99c1.665 4.337 3.405 8.651 5.116 12.974.234.653-.329 1.188-1.04 1.902-.982.958-3.034 2.93-5.136 5.561h2.107l5.067-5.554c.482-.662 1.077-1.309.824-1.909L8.145 5.806c.924-.785 1.763-1.676 2.618-2.531l5.252 13.173c.303.891-.175 1.684-1.134 2.549-1.148.922-3.508 3.073-4.58 4.712h1.631c1.71-1.758 2.017-1.994 3.964-3.68 1.308-1.334 2.488-2.022 1.871-3.731l-4.13-10.325c1.007-.99 2.013-1.875 2.98-2.852 2.113 4.643 3.559 8.384 5.33 13.33.58 1.607.458 1.682-.928 2.55-2.228 1.107-2.929 1.834-5.585 4.66h1.815c2.22-2.008 3.045-2.716 5.825-4.18.983-.569 1.116-1.285.713-2.4-1.3-3.616-4.116-11.41-6.719-16.755l-4.103 3.971-1.569-3.92C9.912 1.38 8.74 2.78 7.466 4.04z"},child:[]}]})(r)}const Q="/assets/confirm-image-CD9o_XXT.webp";function Z(){const{user:r}=_(),l=r?.user_metadata,{register:t,handleSubmit:d}=P(),[s,N]=z.useState(null),{updateUser:y,isLoading:i}=$(),{cartList:v,isLoading:C}=H(),n=v?.filter(a=>a?.user_id===r?.id)?.slice().sort((a,o)=>o?.id-a?.id),c=n?.reduce((a,o)=>a+(o?.total_book_price||0),0),{createOrder:F,isLoading:L}=J(),{deleteCartItem:k,isLoading:w}=X();function E(a){const{fullName:o,phoneNumber:m,doorNoStreet:u,landMark:x,city:f,pinCode:p,state:h}=a;y({fullName:o,phoneNumber:m,doorNoStreet:u,landMark:x,city:f,pinCode:p,state:h});const M=r?.id,O=o,q=m,I=r?.email,B=`${u}, ${x}, ${f} - ${p}, ${h}`;F({booksOrdered:{orderedBooks:n},total_bill:c,user_id:M,user_name:O,phone_number:q,email:I,address:B},{onSuccess:()=>{n?.map(D=>{w||k(D.id)})}})}function S(a){N(a)}return e.jsx(e.Fragment,{children:n?.length===0?e.jsx(A,{}):e.jsxs("div",{className:"grid w-full grid-cols-2 items-center justify-center gap-16",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-12",children:[e.jsx("div",{className:"rounded-2xl border-2 border-gray-300 px-6 py-6",children:C?e.jsx(b,{}):e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("span",{children:e.jsx(R,{size:80,className:"text-green-700"})}),e.jsxs("h1",{className:"text-justify text-[1.4rem] font-semibold text-gray-900",children:["You can pay"," ",e.jsxs("span",{className:"text-[#ff5500]",children:["₹",c]})," ","in cash on delivery when your books are delivered."]})," "]}),e.jsxs("p",{className:"flex items-center justify-center gap-2 text-center text-[1.2rem] font-semibold text-blue-950",children:[e.jsx(Y,{size:30}),"We always deliver for free — no delivery charges ever!"]})]})}),e.jsxs("p",{className:"flex items-start justify-start gap-4 rounded-lg border-2 border-[#FFDDCC] bg-[#FFEEE6] px-8 py-6 text-justify text-xl font-medium text-[#FF5500]",children:[e.jsx("span",{children:e.jsx(G,{size:30})}),e.jsx("span",{children:"Before placing your order, please review your name, phone number, and address details. If there are any changes, please update them in the form beside."})]}),e.jsx("img",{src:Q,className:"h-[35rem] w-[35rem]"})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex w-[32.5rem] flex-col items-center justify-center gap-8 rounded-2xl border-2 border-gray-300 px-8 py-[3rem]",children:[e.jsx("h1",{className:"text-[2rem] font-semibold text-gray-900",children:"Confirm Your Details"}),e.jsxs("form",{onSubmit:d(E,S),className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"fullName",className:"formLabel",children:"Full name"}),e.jsx("input",{type:"text",name:"fullName",id:"fullName",className:"formInputBox bg-slate-100 focus:bg-white",...t("fullName",{required:"This field is required"}),defaultValue:r.user_metadata.fullName,disabled:i}),s?.fullName?.message&&e.jsx(FormError,{children:s.fullName.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"formLabel",children:"Phone Number :"}),e.jsx("input",{type:"text",name:"phoneNumber",id:"phoneNumber",className:"formInputBox bg-slate-100 focus:bg-white",...t("phoneNumber",{required:"This field is required",minLength:{value:10,message:"PhoneNumber invalidate"}}),defaultValue:l?.phoneNumber,disabled:i}),s?.phoneNumber?.message&&e.jsx(FormError,{children:s.phoneNumber.message})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("label",{className:"formLabel text-center text-xl",children:"Home Address:"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"doorNoStreet",className:"formLabel",children:"Door No & Street:"}),e.jsx("input",{type:"text",name:"doorNoStreet",id:"doorNoStreet",className:"formInputBox bg-slate-100 focus:bg-white",...t("doorNoStreet",{required:"This field is required"}),defaultValue:l?.doorNoStreet,disabled:i}),s?.doorNoStreet?.message&&e.jsx(FormError,{children:s.doorNoStreet.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"landMark",className:"formLabel",children:"Land Mark:"}),e.jsx("input",{type:"text",name:"landMark",id:"landMark",className:"formInputBox bg-slate-100 focus:bg-white",...t("landMark",{required:"This field is required"}),defaultValue:l?.landMark,disabled:i}),s?.landMark?.message&&e.jsx(FormError,{children:s.landMark.message})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"city",className:"formLabel",children:"City"}),e.jsx("input",{type:"text",name:"city",id:"city",className:"formInputBox bg-slate-100 focus:bg-white",...t("city",{required:"This field is required"}),defaultValue:l?.city,disabled:i}),s?.city?.message&&e.jsx(FormError,{children:s.city.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"pinCode",className:"formLabel",children:"Pincode"}),e.jsx("input",{type:"text",name:"pinCode",id:"pinCode",className:"formInputBox bg-slate-100 focus:bg-white",...t("pinCode",{required:"This field is required"}),defaultValue:l?.pinCode,disabled:i}),s?.pinCode?.message&&e.jsx(FormError,{children:s.pinCode.message})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"state",className:"formLabel",children:"State"}),e.jsx("input",{type:"text",name:"state",id:"state",className:"formInputBox bg-slate-100 focus:bg-white",...t("state",{required:"This field is required"}),defaultValue:l?.state,disabled:i}),s?.state?.message&&e.jsx(FormError,{children:s.state.message})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center gap-4 px-4 transition-all",children:e.jsx("button",{className:"w-full rounded-full bg-[#ff5500] px-4 py-2 text-xl font-medium text-white hover:bg-[#E64D00] active:bg-[#E64D00]",children:L?e.jsx(b,{}):e.jsxs("span",{className:"flex items-center justify-center gap-4",children:[e.jsx(K,{})," Place Your Order"]})})})]})]})})]})})}function pe(){const{handleOutsideClick:r}=V();return e.jsx("section",{className:"overflow-hidden px-[6.4rem] pb-[6.4rem] pt-[3.6rem]",onClick:r,children:e.jsx(Z,{})})}export{pe as default};
