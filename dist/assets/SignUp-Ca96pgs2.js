import{k,d as B,p as E,z as m,r as I,a as M,e as c,j as e,L as D,q as U,t as z,u as V}from"./index-CxhnL_yD.js";import{F as x,a as u}from"./index-CSx6wYZJ.js";import{u as R}from"./index.esm-BA-d1bXk.js";import{r as $,F as i}from"./login-signup-image-C476cLrk.js";import{u as A,S as O}from"./SpinnerMini-TSTRqYFy.js";import"./iconBase-fCoKCrix.js";function Q(){const s=k(),d=B(),{mutate:o,isPending:n,error:t}=A({mutationFn:E,onSuccess:()=>{s("/books"),d.invalidateQueries(["user"]),m.success("Your account successfully signed up")},onError:()=>{m.error("Your account already exists. Please log in.",{error:t})}});return{signup:o,isLoading:n,error:t}}function Y(){const[s,d]=I.useState(null),o=M(),n=c(a=>a.user.signUppasswordViewBtn),t=c(a=>a.user.confirmPasswordBtn),{register:r,handleSubmit:p,getValues:f,reset:h}=R(),{signup:g,isLoading:l}=Q();function N(a){a.preventDefault(),o(U())}function j(a){a.preventDefault(),o(z())}function b(a){const{fullName:y,email:v,password:S,phoneNumber:q,doorNoStreet:P,landMark:L,city:C,pinCode:F,state:T}=a;g({fullName:y,email:v,password:S,phoneNumber:q,doorNoStreet:P,landMark:L,city:C,pinCode:F,state:T},{onSettled:()=>h()})}function w(a){d(a)}return e.jsxs("div",{className:"grid grid-cols-2 items-start justify-center gap-8 px-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:$,className:"h-[33rem] w-[33rem]",alt:"login image"})}),e.jsx("div",{className:"flex flex-col items-center justify-center gap-6",children:e.jsxs("form",{className:"formLayout w-[32rem]",onSubmit:p(b,w),children:[e.jsx("h1",{className:"formTitle",children:"Sign Up to The Chapter Den"}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"fullName",className:"formLabel",children:"Full name"}),e.jsx("input",{type:"text",name:"fullName",id:"fullName",className:"formInputBox",...r("fullName",{required:"This field is required"}),disabled:l}),s?.fullName?.message&&e.jsx(i,{children:s.fullName.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"email",className:"formLabel",children:"Email"}),e.jsx("input",{type:"text",name:"email",id:"email",className:"formInputBox",...r("email",{required:"This field is required",pattern:{value:/\S+@\S+\.\S+/,message:"Please provide a valid email address"}}),disabled:l}),s?.email?.message&&e.jsx(i,{children:s.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"password",className:"formLabel",children:"Password (min 8 characters)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:`${n?"password":"text"}`,name:"password",id:"password",className:"formInputBox",...r("password",{required:"This field is required",minLength:{value:8,message:"Password should be at least 8 characters"}}),disabled:l}),e.jsx("button",{className:"absolute right-[1rem] top-[7px]",onClick:N,children:n?e.jsx(x,{size:24,className:"text-gray-800"}):e.jsx(u,{size:24,className:"text-[#ff5500]"})})]}),s?.password?.message&&e.jsx(i,{children:s.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"password",className:"formLabel",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:`${t?"password":"text"}`,name:"confirmPassword",id:"confirmPassword",className:"formInputBox",...r("confirmPassword",{required:"This field is required",validate:a=>a===f().password||"Passwords do not match"}),disabled:l}),e.jsx("button",{className:"absolute right-[1rem] top-[7px]",onClick:j,children:t?e.jsx(x,{size:24,className:"text-gray-800"}):e.jsx(u,{size:24,className:"text-[#ff5500]"})})]}),s?.confirmPassword?.message&&e.jsx(i,{children:s.confirmPassword.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"formLabel",children:"Phone Number"}),e.jsx("input",{type:"text",name:"phoneNumber",id:"phoneNumber",className:"formInputBox",...r("phoneNumber",{required:"This field is required",minLength:{value:10,message:"PhoneNumber invalidate"}}),disabled:l}),s?.phoneNumber?.message&&e.jsx(i,{children:s.phoneNumber.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{className:"formLabel",children:"Home Address"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"doorNoStreet",className:"formLabel",children:"Door No & Street:"}),e.jsx("input",{type:"text",name:"doorNoStreet",id:"doorNoStreet",className:"formInputBox w-full",...r("doorNoStreet",{required:"This field is required"}),disabled:l}),s?.doorNoStreet?.message&&e.jsx(i,{children:s.doorNoStreet.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"landMark",className:"formLabel",children:"Land Mark:"}),e.jsx("input",{type:"text",name:"landMark",id:"landMark",className:"formInputBox w-full",...r("landMark",{required:"This field is required"}),disabled:l}),s?.landMark?.message&&e.jsx(i,{children:s.landMark.message})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"city",className:"formLabel",children:"City"}),e.jsx("input",{type:"text",name:"city",id:"city",className:"formInputBox w-full",...r("city",{required:"This field is required"}),disabled:l}),s?.city?.message&&e.jsx(i,{children:s.city.message})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"pinCode",className:"formLabel",children:"Pincode"}),e.jsx("input",{type:"text",name:"pinCode",id:"pinCode",className:"formInputBox w-full",...r("pinCode",{required:"This field is required"}),disabled:l}),s?.pinCode?.message&&e.jsx(i,{children:s.pinCode.message})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsx("label",{htmlFor:"state",className:"formLabel",children:"State"}),e.jsx("input",{type:"text",name:"state",id:"state",className:"formInputBox w-full",...r("state",{required:"This field is required"}),disabled:l}),s?.state?.message&&e.jsx(i,{children:s.state.message})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 px-4 transition-all",children:[e.jsxs("p",{className:"text-base font-medium text-gray-700",children:["Already have an account?"," ",e.jsx(D,{to:"/login",className:"text-[#ff5500] underline",children:"Log in"})]}),e.jsx("button",{className:"w-[22.5rem] rounded-full bg-[#ff5500] px-4 py-2 text-xl font-medium text-white hover:bg-[#E64D00] active:bg-[#E64D00]",children:l?e.jsx(O,{}):"Sign Up"})]})]})})]})}function Z(){const{handleOutsideClick:s}=V();return e.jsx("section",{className:"overflow-hidden px-[4.8rem] py-[2.4rem]",onClick:s,children:e.jsx(Y,{})})}export{Z as default};
